<div id='trip-info'>
  <h2><%= @trip.name %></h2>
  <p><b>Dates:</b> From
    <%= @trip.format_start_date %>
    to
    <%= @trip.format_end_date %></p>
  <%= link_to "Update trip info", edit_trip_path(@trip.id) %>
  <%= link_to "Delete trip", trip_path(@trip.id), method: :delete %>
</div>
<h3>Add Friends to Trip:</h3>
<% @user.friends.map do |friend| %>
  <div id="friend-<%= friend[:data][:attributes][:friend_id] %>">
    <p><%= friend[:data][:attributes][:friend_name] %><%= button_to "Add", trips_riders_path, params: {user_id: friend[:data][:attributes][:friend_id], trip_id: @trip.id} %></p>
  </div>
<% end %>
<h3>Friends:</h3>
<% @trip.riders.each do |rider| %>
<div id="rider-<%= rider[:data][:attributes][:user_id] %>">
  <ul>
    <li>Name: <%= rider[:data][:attributes][:rider_name] %></li>
    <li>Budget: <%= rider[:data][:attributes][:budget] %></li>
  </ul>
</div>
<% end %>

<h3>Resort Options:</h3>
<div id="options">
  <% if @trip.options %>
    <ul>
      <div class="row text-center">
        <% @trip.options.each do |option| %>
          <div id="option-<%= option[:data][:attributes][:resort_id] %>">
            <div class="col-sm-6">
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title"><%= link_to option[:data][:attributes][:resort_name], resort_path(option[:data][:attributes][:resort_id]) %></h5>
                  <p class="card-text">Number of Votes: <%= option[:data][:attributes][:vote_count] %></p>
                  <% if option[:data][:attributes][:vote_count] == 0 %>
                    <%= link_to 'Vote', trip_vote_path(trip_id: @trip.id, resort_id: option[:data][:attributes][:resort_id], user_id: current_user.id), method: :patch, class: "btn btn-primary"%>
                  <% end %>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    </ul>
  <% else %>
    Please add resorts below.
  <% end %>
</div>

<h2>Add Resorts:</h2>
<%= render 'shared/resort_search', path: trip_path(@trip.id) %>
